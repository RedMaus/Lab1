<!doctype HTML>
<html>
<script src="https://aframe.io/releases/0.9.1/aframe.min.js"></script>
<script src="https://raw.githack.com/jeromeetienne/AR.js/1.7.1/aframe/build/aframe-ar.js"></script>
<script src="https://github.com/mrdoob/three.js/tree/dev/build/three.js"></script>
<script src="https://github.com/mrdoob/three.js/tree/dev/build/three.min.js"></script>
  <body style='margin : 0px; overflow: hidden;'>
  <script>
	renderer = new THREE.WebGLRenderer({ 
        antialias: true, 
        alpha: true 
    });

    //Create our scene and camera
    scene = new THREE.Scene();
    camera = new THREE.Camera();

    renderer.setClearColor(0x000000, 0);
    renderer.setSize(window.innerWidth, window.innerHeight);

    rootContainer.appendChild(renderer.domElement);
    scene.add(camera);
    scene.visible = false;

	var geometry	= new THREE.TorusKnotGeometry(0.3,0.1,64,16);
	var material	= new THREE.MeshNormalMaterial(); 
	var mesh	= new THREE.Mesh( geometry, material );
	mesh.position.y	= 0.5
	scene.add( mesh );

    // create AR toolkit source
    arSource = new THREEx.ArToolkitSource({
        sourceType : 'webcam',
    });

    // create AR toolkit context
    arContext = new THREEx.ArToolkitContext({
        cameraParametersUrl: 'https://redmaus.github.io/Lab1/camera_para.dat',
        detectionMode: 'mono',
    });

  
    // create markerControls
    arMarker = new THREEx.ArMarkerControls(arContext, camera, {
        type : 'pattern',
        Url : 'https://redmaus.github.io/Lab1/Lab.patt',
        changeMatrixMode: 'cameraTransformMatrix'
    });





    // handle resize
    arSource.init(function(){
        arSource.onResize();
        arSource.copySizeTo(renderer.domElement);
        if(arContext.arController !== null) {
            arSource.copySizeTo(arContext.arController.canvas);
        }
    });

    arContext.init(function onCompleted(){
        camera.projectionMatrix.copy(arContext.getProjectionMatrix());
    });

    render();
	requestAnimationFrame(render);
    renderer.render(scene,camera);                

    if(arSource.ready === false) return;

    arContext.update(arSource.domElement);
    scene.visible = camera.visible;

    meshSurface.rotateX(.1);
  </script>
  </body>
</html>
